{"ast":null,"code":"import _defineProperty from\"/Users/santosh/barclays/front-end/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/santosh/barclays/front-end/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/santosh/barclays/front-end/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import ReactDOM from\"react-dom/client\";import\"./styles.css\";import logoLeft from\"./chevron-left-solid.svg\";import logoRight from\"./chevron-right-solid.svg\";import plus from\"./plus-solid.svg\";import minus from\"./minus-solid.svg\";import L from'leaflet';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import'leaflet/dist/leaflet.css';import TextField from\"@mui/material/TextField\";import jwt_decode from\"jwt-decode\";import{ReactNotifications}from'react-notifications-component';import{Store}from'react-notifications-component';import'react-notifications-component/dist/theme.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){var baseEndpoint=\"https://barclays-hackerearth.herokuapp.com\";useEffect(function(){var currentTimeStamp=new Date();var seconds=currentTimeStamp.getTime()/1000;console.log(isLoggedIn);if(sessionExpiry<=seconds){console.log(sessionExpiry);clearCache();if(sessionExpiry!=-1)Store.addNotification({title:'Session Expired',message:'Pls login again',type:'warning',container:'top-right',animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:3000}});}if(!window.sessionStorage.getItem(\"coordinates\")){navigator.geolocation.getCurrentPosition(function(position){setCoordinates([position.coords.latitude,position.coords.longitude]);});}},[]);function getSessionStorageOrDefault(key,defaultValue){var stored=window.sessionStorage.getItem(key);if(!stored||stored==undefined){return defaultValue;}return JSON.parse(stored);}// React States\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errorMessages=_useState2[0],setErrorMessages=_useState2[1];var _useState3=useState(getSessionStorageOrDefault(\"isLoggedIn\",false)),_useState4=_slicedToArray(_useState3,2),isLoggedIn=_useState4[0],setIsSubmitted=_useState4[1];var _useState5=useState(getSessionStorageOrDefault(\"itemCount\",{})),_useState6=_slicedToArray(_useState5,2),itemCount=_useState6[0],setCartCount=_useState6[1];var _useState7=useState(getSessionStorageOrDefault(\"menuItems\",[])),_useState8=_slicedToArray(_useState7,2),menuItems=_useState8[0],setMenuItems=_useState8[1];var _useState9=useState(getSessionStorageOrDefault(\"menuItemPrice\",[])),_useState10=_slicedToArray(_useState9,2),menuItemPrice=_useState10[0],setMenuItemPrice=_useState10[1];var _useState11=useState(getSessionStorageOrDefault(\"currentPage\",0)),_useState12=_slicedToArray(_useState11,2),currentPage=_useState12[0],setCurrentPage=_useState12[1];var _useState13=useState(getSessionStorageOrDefault(\"cartFilled\",false)),_useState14=_slicedToArray(_useState13,2),cartFilled=_useState14[0],setCartFilled=_useState14[1];var _useState15=useState(getSessionStorageOrDefault(\"coordinates\",[0,0])),_useState16=_slicedToArray(_useState15,2),coordinates=_useState16[0],setCoordinates=_useState16[1];var _useState17=useState(getSessionStorageOrDefault(\"checkout\",false)),_useState18=_slicedToArray(_useState17,2),checkout=_useState18[0],setCheckout=_useState18[1];var _useState19=useState(getSessionStorageOrDefault(\"userInfo\",{})),_useState20=_slicedToArray(_useState19,2),userInfo=_useState20[0],setUserInfo=_useState20[1];var _useState21=useState(getSessionStorageOrDefault(\"menuItemsTemp\",[])),_useState22=_slicedToArray(_useState21,2),menuItemsTemp=_useState22[0],setMenuItemsTemp=_useState22[1];var _useState23=useState(getSessionStorageOrDefault(\"menuItemPriceTemp\",[])),_useState24=_slicedToArray(_useState23,2),menuItemPriceTemp=_useState24[0],setMenuItemsPriceTemp=_useState24[1];var _useState25=useState(getSessionStorageOrDefault(\"sessionExpiry\",-1)),_useState26=_slicedToArray(_useState25,2),sessionExpiry=_useState26[0],setSessionExpiry=_useState26[1];var _useState27=useState(getSessionStorageOrDefault(\"token\",\"\")),_useState28=_slicedToArray(_useState27,2),token=_useState28[0],setToken=_useState28[1];var _useState29=useState(getSessionStorageOrDefault(\"totalDiscount\",[])),_useState30=_slicedToArray(_useState29,2),totalDiscount=_useState30[0],setTotalDiscount=_useState30[1];var _useState31=useState(getSessionStorageOrDefault(\"storeStoreCoordinates\",[0,0])),_useState32=_slicedToArray(_useState31,2),storeCoordinates=_useState32[0],setStoreCoordinates=_useState32[1];var _useState33=useState(getSessionStorageOrDefault(\"orderToken\",\"\")),_useState34=_slicedToArray(_useState33,2),orderToken=_useState34[0],setOrderToken=_useState34[1];var _useState35=useState(getSessionStorageOrDefault(\"storeName\",\"\")),_useState36=_slicedToArray(_useState35,2),storeName=_useState36[0],setStoreName=_useState36[1];var _useState37=useState(getSessionStorageOrDefault(\"storeDistance\",0)),_useState38=_slicedToArray(_useState37,2),storeDistance=_useState38[0],setStoreDistance=_useState38[1];useEffect(function(){window.sessionStorage.setItem(\"isLoggedIn\",isLoggedIn);window.sessionStorage.setItem(\"itemCount\",JSON.stringify(itemCount));window.sessionStorage.setItem(\"menuItems\",JSON.stringify(menuItems));window.sessionStorage.setItem(\"menuItemPrice\",JSON.stringify(menuItemPrice));window.sessionStorage.setItem(\"currentPage\",currentPage);window.sessionStorage.setItem(\"cartFilled\",cartFilled);window.sessionStorage.setItem(\"coordinates\",JSON.stringify(coordinates));window.sessionStorage.setItem(\"storeCoordinates\",JSON.stringify(storeCoordinates));window.sessionStorage.setItem(\"checkout\",checkout);window.sessionStorage.setItem(\"userInfo\",JSON.stringify(userInfo));window.sessionStorage.setItem(\"menuItemsTemp\",JSON.stringify(menuItemsTemp));window.sessionStorage.setItem(\"menuItemPriceTemp\",JSON.stringify(menuItemPriceTemp));window.sessionStorage.setItem(\"sessionExpiry\",sessionExpiry);window.sessionStorage.setItem(\"token\",JSON.stringify(token));window.sessionStorage.setItem(\"totalDiscount\",JSON.stringify(totalDiscount));window.sessionStorage.setItem(\"orderToken\",JSON.stringify(orderToken));window.sessionStorage.setItem(\"storeName\",JSON.stringify(storeName));window.sessionStorage.setItem(\"storeDistance\",JSON.stringify(storeDistance));},[isLoggedIn,itemCount,menuItems,,menuItemPrice,currentPage,cartFilled,checkout,userInfo,menuItemsTemp,menuItemsTemp,coordinates,sessionExpiry,token,totalDiscount,storeCoordinates,orderToken,storeDistance,storeName]);var clearCache=function clearCache(){setIsSubmitted(false);setCartCount({});setMenuItems([]);setMenuItemPrice([]);setCurrentPage(0);setCartFilled(false);setCoordinates([0,0]);setStoreCoordinates([0,0]);setCheckout(false);setUserInfo({});setMenuItemsTemp([]);setMenuItemsPriceTemp([]);setSessionExpiry(-1);setToken(\"\");setTotalDiscount([]);setOrderToken(\"\");setStoreName(\"\");setStoreDistance(0);navigator.geolocation.getCurrentPosition(function(position){setCoordinates([position.coords.latitude,position.coords.longitude]);});};var incPage=function incPage(){if(currentPage+2>Math.ceil(menuItems.length/4))return;setCurrentPage(currentPage+1);};var decPage=function decPage(){if(currentPage-1<0)return;setCurrentPage(currentPage-1);};var finalizeCart=function finalizeCart(){var item_selected=0;for(var key in itemCount){item_selected+=itemCount[key];}if(item_selected>0)setCartFilled(true);else{Store.addNotification({title:'Empty cart',message:'Pls add items to proceed',type:'warning',container:'top-right',animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:3000}});}};var finalizeCheckout=function finalizeCheckout(){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({'item_details':Object.entries(itemCount),'user_location':{'lat':coordinates[0],'lon':coordinates[1]}})};fetch(baseEndpoint+\"/get_nearest_store_and_get_payment_token/\"+token,requestOptions).then(function(response){return response.json();}).then(function(data){if(data.success){console.log(\"success\",data.data.store_coordinates);setStoreCoordinates(data.data.store_coordinates);setOrderToken(data.order_token);setStoreName(data.data.store_name);setStoreDistance(data.distance);setCheckout(true);}});};var definalizeCart=function definalizeCart(){setCartFilled(false);};var handleLogin=function handleLogin(event){//Prevent page reload\nevent.preventDefault();var _document$forms$=document.forms[0],uname=_document$forms$.uname,pass=_document$forms$.pass;//Call the login API to validate the login call\nvar requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({uname:uname.value,password:pass.value})};fetch(baseEndpoint+\"/login\",requestOptions).then(function(response){return response.json();}).then(function(data){if(data.success){var token=jwt_decode(data.token);setUserInfo({'userName':token.username});setSessionExpiry(token.expiry);setIsSubmitted(true);setToken(data.token);var menuItems_resp=[];var menuItemPrices_resp=[];var menuItemDiscounts_resp=[];var cartCount_resp={};var requestOptions_={method:'GET',headers:{'Content-Type':'application/json'}};fetch(baseEndpoint+\"/get_item_details/\"+data.token,requestOptions_).then(function(response){return response.json();}).then(function(data){console.log(data.success);if(data.success){data.data.forEach(function(element){cartCount_resp[element.name]=0;menuItems_resp.push(element.name);menuItemPrices_resp.push(parseFloat(element.mrp));menuItemDiscounts_resp.push(parseFloat(element.discountPercent));});setMenuItems(menuItems_resp);setMenuItemPrice(menuItemPrices_resp);setMenuItemsTemp(menuItems_resp);setMenuItemsPriceTemp(menuItemPrices_resp);console.log(JSON.stringify(cartCount_resp),\"Hello\");setCartCount(cartCount_resp);setTotalDiscount(menuItemDiscounts_resp);}else{clearCache();Store.addNotification({title:'Session Expired',message:'Pls login again',type:'warning',container:'top-right',animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:3000}});}});}else{Store.addNotification({title:'Login',message:'Pls check your login credentials',type:'warning',container:'top-right',animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:3000}});}});//Call the menu-api for item list and populate everything with 0.\n//   setCartCount({'Soap': 0, 'Powder': 0, 'Shampoo': 0, 'Juice': 0, 'Soap1': 0,\n// 'Juice1': 0, 'Shampoo1': 0, 'Powder1': 0});\n// setMenuItems(['Soap', 'Powder', 'Shampoo', 'Juice', 'Soap1', 'Juice1', 'Shampoo1', 'Powder1']);\n// setMenuItemPrice([100, 200, 300, 100, 200, 300, 40, 80]);\n// setMenuItemsTemp(['Soap', 'Powder', 'Shampoo', 'Juice', 'Soap1', 'Juice1', 'Shampoo1', 'Powder1']);\n// setMenuItemsPriceTemp([100, 200, 300, 100, 200, 300, 40, 80]);\n};var processIncrementAction=function processIncrementAction(item){var existingCount=itemCount[item];setCartCount(_objectSpread(_objectSpread({},itemCount),{},_defineProperty({},item,existingCount+1)));};var processDecrementAction=function processDecrementAction(item){var existingCount=itemCount[item];setCartCount(_objectSpread(_objectSpread({},itemCount),{},_defineProperty({},item,Math.max(existingCount-1,0))));};var populateMenu=function populateMenu(){var populatedItem=[];var _loop=function _loop(){var itemCtr=item+4*currentPage;var item_id=\"row_\"+itemCtr;var plus_id=\"plus_\"+itemCtr;var minus_id=\"minus_\"+itemCtr;var itemName=menuItems[item+4*currentPage];var itemPrice=menuItemPrice[item+4*currentPage];populatedItem.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row_menu\",children:[/*#__PURE__*/_jsxs(\"span\",{id:item_id,style:{paddingLeft:'1.5vmin',paddingRight:'1.5vmin'},children:[itemName,\" - \",itemPrice,\"Rs.\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"image\",className:\"icon\",src:minus,id:minus_id,onClick:function onClick(){return processDecrementAction(itemName);}}),/*#__PURE__*/_jsx(\"span\",{style:{paddingLeft:'.5vmin',paddingRight:'.5vmin'},children:itemCount[menuItems[item+4*currentPage]]}),/*#__PURE__*/_jsx(\"input\",{type:\"image\",className:\"icon\",src:plus,id:plus_id,onClick:function onClick(){return processIncrementAction(itemName);}})]})]}));};for(var item=0;item<Math.min(menuItems.length,4);item++){_loop();}return populatedItem;};var queryItems=function queryItems(value){var filteredMenu=menuItemsTemp.filter(function(it){if(value.length==0){setMenuItemPrice(menuItemPriceTemp);setMenuItems(menuItemsTemp);}else{return it.toLowerCase().includes(value.toLowerCase());}});if(value.length>0){var filteredMenuPrice=[];filteredMenu.forEach(function(element){filteredMenuPrice.push(menuItemPriceTemp[menuItemsTemp.indexOf(element)]);});setMenuItems(filteredMenu);setMenuItemPrice(filteredMenuPrice);}};var orderSummary=function orderSummary(){var populatedItem=[];var totalAmount=0;var discountedPrice=0;for(var item=0;item<menuItems.length;item++){if(itemCount[menuItems[item]]>0){totalAmount+=menuItemPrice[item]*itemCount[menuItems[item]];discountedPrice+=itemCount[menuItems[item]]*menuItemPrice[item]*(1-totalDiscount[item]/100);populatedItem.push(/*#__PURE__*/_jsx(\"div\",{className:\"row_menu\",children:/*#__PURE__*/_jsxs(\"span\",{style:{paddingLeft:'1.5vmin',paddingRight:'1.5vmin'},children:[\"\\u2705 \",menuItems[item]+\" x\"+itemCount[menuItems[item]]]})}));}}populatedItem.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row_menu\",children:[/*#__PURE__*/_jsx(\"span\",{style:{paddingLeft:'1.5vmin',paddingRight:'1.5vmin'},children:\"Your order value: \"+totalAmount+\"Rs.\"}),/*#__PURE__*/_jsx(\"span\",{style:{paddingLeft:'1.5vmin',paddingRight:'1.5vmin'},children:\"After discount(s): \"+discountedPrice+\"Rs.\"})]}));return populatedItem;};// Generate JSX code for error message\nvar renderErrorMessage=function renderErrorMessage(name){return name===errorMessages.name&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errorMessages.message});};// JSX code for login form\nvar renderForm=/*#__PURE__*/_jsxs(\"div\",{className:\"form\",children:[Store.addNotification({title:'Login Credentials',message:'Use Santosh/passoword as uname/pw',type:'default',container:'top-right',animationIn:[\"animated\",\"fadeIn\"],animationOut:[\"animated\",\"fadeOut\"],dismiss:{duration:30000}}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"uname\",required:true}),renderErrorMessage(\"uname\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password \"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"pass\",required:true}),renderErrorMessage(\"pass\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})})]})]});var cartPageRender=cartFilled?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-page-title\",children:\"Order Summary.\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"row1\",children:/*#__PURE__*/_jsx(\"div\",{id:\"col2\",children:/*#__PURE__*/_jsx(\"div\",{id:\"menu\",children:orderSummary()})})}),/*#__PURE__*/_jsxs(\"div\",{id:\"row1\",style:{paddingTop:'2vmin',display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"place-order\",value:\"Go Back\",onClick:function onClick(){definalizeCart();}}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"place-order\",value:\"Proceed\",onClick:function onClick(){finalizeCheckout();}})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"logout\",style:{paddingTop:'2vmin'},children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-danger btn-sm\",id:\"place-order\",value:\"Logout\",onClick:function onClick(){clearCache();}})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-page-title\",children:[\" \",\"Hey \"+userInfo['userName']+\", What'cha buyin. today?\"]}),/*#__PURE__*/_jsx(\"div\",{id:\"rowText\",children:/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",variant:\"outlined\",label:\"Search for items...\",size:\"small\",onChange:function onChange(s){return queryItems(s.target.value);}})}),/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"row1\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"col1\",children:/*#__PURE__*/_jsxs(\"div\",{style:{paddingRight:'3vmin'},children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"image\",src:logoLeft,className:\"icon\",id:\"go-left\",onClick:function onClick(){decPage();}})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"col2\",children:/*#__PURE__*/_jsx(\"div\",{id:\"menu\",children:populateMenu()})}),/*#__PURE__*/_jsx(\"div\",{id:\"col3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{paddingLeft:'3vmin'},children:[\" \",/*#__PURE__*/_jsx(\"input\",{type:\"image\",src:logoRight,className:\"icon\",id:\"go-right\",onClick:function onClick(){incPage();}})]})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"row1\",style:{paddingTop:'2vmin'},children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-primary btn-sm\",id:\"place-order\",value:\"Proceed to Checkout\",onClick:function onClick(){finalizeCart();}})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"logout\",style:{paddingTop:'2vmin'},children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-danger btn-sm\",id:\"place-order\",value:\"Logout\",onClick:function onClick(){clearCache();}})})]});var marker=L.icon({iconUrl:plus,iconRetinaUrl:plus,iconAnchor:[5,55],popupAnchor:[10,-44],iconSize:[25,55]});var renderCheckout=/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"col1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"payment-page-title\",children:\"Proceed to Payment.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"payment-page-button\",children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-danger btn-sm\",id:\"place-order\",value:\"Click here for payment\",onClick:function onClick(){window.open(orderToken);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-page-info\",children:[\"Your order is coming from: \",storeName,\" @ a distance: \",storeDistance,\"Kms.\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(MapContainer,{center:coordinates,zoom:12,children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:coordinates,icon:marker,children:/*#__PURE__*/_jsx(Popup,{children:\"Your location.\"})}),/*#__PURE__*/_jsx(Marker,{position:storeCoordinates,icon:marker,children:/*#__PURE__*/_jsx(Popup,{children:\"Store location.\"})})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"logout\",style:{paddingTop:'2vmin'},children:/*#__PURE__*/_jsx(\"input\",{type:\"button\",className:\"btn btn-danger btn-sm\",id:\"place-order\",value:\"Logout\",onClick:function onClick(){clearCache();}})})]});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(ReactNotifications,{}),checkout?renderCheckout:isLoggedIn?cartPageRender:/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"Sign In\"}),renderForm]})})]});}var root=ReactDOM.createRoot(document.getElementById(\"root\"));root.render(/*#__PURE__*/_jsx(App,{}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","logoLeft","logoRight","plus","minus","L","MapContainer","TileLayer","Marker","Popup","TextField","jwt_decode","ReactNotifications","Store","App","baseEndpoint","currentTimeStamp","Date","seconds","getTime","console","log","isLoggedIn","sessionExpiry","clearCache","addNotification","title","message","type","container","animationIn","animationOut","dismiss","duration","window","sessionStorage","getItem","navigator","geolocation","getCurrentPosition","position","setCoordinates","coords","latitude","longitude","getSessionStorageOrDefault","key","defaultValue","stored","undefined","JSON","parse","errorMessages","setErrorMessages","setIsSubmitted","itemCount","setCartCount","menuItems","setMenuItems","menuItemPrice","setMenuItemPrice","currentPage","setCurrentPage","cartFilled","setCartFilled","coordinates","checkout","setCheckout","userInfo","setUserInfo","menuItemsTemp","setMenuItemsTemp","menuItemPriceTemp","setMenuItemsPriceTemp","setSessionExpiry","token","setToken","totalDiscount","setTotalDiscount","storeCoordinates","setStoreCoordinates","orderToken","setOrderToken","storeName","setStoreName","storeDistance","setStoreDistance","setItem","stringify","incPage","Math","ceil","length","decPage","finalizeCart","item_selected","finalizeCheckout","requestOptions","method","headers","body","Object","entries","fetch","then","response","json","data","success","store_coordinates","order_token","store_name","distance","definalizeCart","handleLogin","event","preventDefault","document","forms","uname","pass","value","password","username","expiry","menuItems_resp","menuItemPrices_resp","menuItemDiscounts_resp","cartCount_resp","requestOptions_","forEach","element","name","push","parseFloat","mrp","discountPercent","processIncrementAction","item","existingCount","processDecrementAction","max","populateMenu","populatedItem","itemCtr","item_id","plus_id","minus_id","itemName","itemPrice","paddingLeft","paddingRight","min","queryItems","filteredMenu","filter","it","toLowerCase","includes","filteredMenuPrice","indexOf","orderSummary","totalAmount","discountedPrice","renderErrorMessage","renderForm","cartPageRender","paddingTop","display","gap","s","target","marker","icon","iconUrl","iconRetinaUrl","iconAnchor","popupAnchor","iconSize","renderCheckout","open","root","createRoot","getElementById","render"],"sources":["/Users/santosh/barclays/front-end/src/index.js"],"sourcesContent":["import React, { useState, useEffect} from \"react\";\nimport ReactDOM from \"react-dom/client\";\n\nimport \"./styles.css\";\nimport logoLeft from \"./chevron-left-solid.svg\"\nimport logoRight from \"./chevron-right-solid.svg\"\nimport plus from \"./plus-solid.svg\"\nimport minus from \"./minus-solid.svg\"\nimport L from 'leaflet';\nimport { MapContainer, TileLayer, Marker, Popup  } from 'react-leaflet'\nimport 'leaflet/dist/leaflet.css';\nimport TextField from \"@mui/material/TextField\";\nimport jwt_decode from \"jwt-decode\";\nimport { ReactNotifications } from 'react-notifications-component'\nimport { Store } from 'react-notifications-component';\nimport 'react-notifications-component/dist/theme.css'\n\n\nfunction App() {\n\n  const baseEndpoint = \"https://barclays-hackerearth.herokuapp.com\";\n\n  useEffect(() => {\n    var currentTimeStamp = new Date();\n    var seconds = currentTimeStamp.getTime() / 1000;\n    console.log(isLoggedIn)\n    if (sessionExpiry<=seconds){\n      console.log(sessionExpiry)\n      clearCache();\n      if(sessionExpiry!=-1)\n        Store.addNotification({\n          title: 'Session Expired',\n          message: 'Pls login again',\n          type: 'warning',                        \n          container: 'top-right',                \n          animationIn: [\"animated\", \"fadeIn\"],     \n          animationOut: [\"animated\", \"fadeOut\"],  \n          dismiss: {\n            duration: 3000 \n          }\n        })\n    }\n    if(!window.sessionStorage.getItem(\"coordinates\")){\n    navigator.geolocation.getCurrentPosition(function(position) {\n      setCoordinates([position.coords.latitude, position.coords.longitude])\n    });\n  }\n  \n    \n  }, []);\n\n    function getSessionStorageOrDefault(key, defaultValue) {\n      const stored = window.sessionStorage.getItem(key);\n      \n      if (!stored || stored==undefined) {\n        return defaultValue;\n      }\n      return JSON.parse(stored);\n    }\n\n  // React States\n  const [errorMessages, setErrorMessages] = useState(\"\");\n  const [isLoggedIn, setIsSubmitted] = useState(getSessionStorageOrDefault(\"isLoggedIn\", false));\n  const [itemCount, setCartCount] = useState(getSessionStorageOrDefault(\"itemCount\", {}));\n  const [menuItems, setMenuItems] = useState(getSessionStorageOrDefault(\"menuItems\", []));\n  const [menuItemPrice, setMenuItemPrice] = useState(getSessionStorageOrDefault(\"menuItemPrice\", []));\n  const [currentPage, setCurrentPage] = useState(getSessionStorageOrDefault(\"currentPage\", 0));\n  const [cartFilled, setCartFilled] = useState(getSessionStorageOrDefault(\"cartFilled\", false));\n  const [coordinates, setCoordinates] = useState(getSessionStorageOrDefault(\"coordinates\", [0,0]));\n  const [checkout, setCheckout] = useState(getSessionStorageOrDefault(\"checkout\", false));\n  const [userInfo, setUserInfo] = useState(getSessionStorageOrDefault(\"userInfo\", {}));\n  const [menuItemsTemp, setMenuItemsTemp] = useState(getSessionStorageOrDefault(\"menuItemsTemp\", []));\n  const [menuItemPriceTemp, setMenuItemsPriceTemp] = useState(getSessionStorageOrDefault(\"menuItemPriceTemp\", []));\n  const [sessionExpiry, setSessionExpiry] = useState(getSessionStorageOrDefault(\"sessionExpiry\", -1))\n  const [token, setToken] = useState(getSessionStorageOrDefault(\"token\", \"\"))\n  const [totalDiscount, setTotalDiscount] = useState(getSessionStorageOrDefault(\"totalDiscount\", []))\n  const [storeCoordinates, setStoreCoordinates] = useState(getSessionStorageOrDefault(\"storeStoreCoordinates\", [0,0]));\n  const [orderToken, setOrderToken] = useState(getSessionStorageOrDefault(\"orderToken\", \"\"));\n  const [storeName, setStoreName] = useState(getSessionStorageOrDefault(\"storeName\", \"\"));\n  const [storeDistance, setStoreDistance] = useState(getSessionStorageOrDefault(\"storeDistance\", 0));\n\n  useEffect(() => {\n    window.sessionStorage.setItem(\"isLoggedIn\", isLoggedIn);\n    window.sessionStorage.setItem(\"itemCount\", JSON.stringify(itemCount));\n    window.sessionStorage.setItem(\"menuItems\", JSON.stringify(menuItems));\n    window.sessionStorage.setItem(\"menuItemPrice\", JSON.stringify(menuItemPrice));\n    window.sessionStorage.setItem(\"currentPage\", currentPage);\n    window.sessionStorage.setItem(\"cartFilled\", cartFilled);\n    window.sessionStorage.setItem(\"coordinates\", JSON.stringify(coordinates));\n    window.sessionStorage.setItem(\"storeCoordinates\", JSON.stringify(storeCoordinates));\n    window.sessionStorage.setItem(\"checkout\", checkout);\n    window.sessionStorage.setItem(\"userInfo\", JSON.stringify(userInfo));\n    window.sessionStorage.setItem(\"menuItemsTemp\", JSON.stringify(menuItemsTemp));\n    window.sessionStorage.setItem(\"menuItemPriceTemp\", JSON.stringify(menuItemPriceTemp));\n    window.sessionStorage.setItem(\"sessionExpiry\", sessionExpiry);\n    window.sessionStorage.setItem(\"token\", JSON.stringify(token));\n    window.sessionStorage.setItem(\"totalDiscount\", JSON.stringify(totalDiscount));\n    window.sessionStorage.setItem(\"orderToken\", JSON.stringify(orderToken));\n    window.sessionStorage.setItem(\"storeName\", JSON.stringify(storeName));\n    window.sessionStorage.setItem(\"storeDistance\", JSON.stringify(storeDistance));\n\n\n\n  }, [isLoggedIn, itemCount, menuItems, , menuItemPrice,\n  currentPage, cartFilled, checkout, userInfo, menuItemsTemp, menuItemsTemp, coordinates, sessionExpiry,\ntoken, totalDiscount, storeCoordinates, orderToken, storeDistance, storeName]);\n  \n\n\n\n  const clearCache = () => {\n    setIsSubmitted(false);\n    setCartCount({})\n    setMenuItems([])\n    setMenuItemPrice([])\n    setCurrentPage(0);\n    setCartFilled(false);\n    setCoordinates([0,0]);\n    setStoreCoordinates([0,0]);\n    setCheckout(false);\n    setUserInfo({});\n    setMenuItemsTemp([]);\n    setMenuItemsPriceTemp([]);\n    setSessionExpiry(-1);\n    setToken(\"\");\n    setTotalDiscount([]);\n    setOrderToken(\"\");\n    setStoreName(\"\");\n    setStoreDistance(0);\n\n    navigator.geolocation.getCurrentPosition(function(position) {\n      setCoordinates([position.coords.latitude, position.coords.longitude])\n    });\n  }\n\n  const incPage = () => {\n    if ((currentPage+2)>Math.ceil(menuItems.length/4))\n      return;\n    setCurrentPage(currentPage+1);\n  }\n\n  const decPage = () => {\n    if (currentPage-1<0)\n      return;\n    setCurrentPage(currentPage-1);\n  }\n\n  const finalizeCart = () => {\n    let item_selected = 0;\n    for (var key in itemCount){\n      item_selected+=itemCount[key]\n    }\n    if(item_selected>0)\n      setCartFilled(true);\n    else{\n      Store.addNotification({\n        title: 'Empty cart',\n        message: 'Pls add items to proceed',\n        type: 'warning',                        \n        container: 'top-right',                \n        animationIn: [\"animated\", \"fadeIn\"],     \n        animationOut: [\"animated\", \"fadeOut\"],  \n        dismiss: {\n          duration: 3000 \n        }\n      })\n    }\n  }\n\n  const finalizeCheckout = () => {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({'item_details': Object.entries(itemCount), \n      'user_location': {'lat': coordinates[0], 'lon': coordinates[1]}})\n    };\n    fetch(baseEndpoint+\"/get_nearest_store_and_get_payment_token/\"+token, requestOptions)\n        .then(response => response.json())\n        .then(data => {\n            if(data.success){console.log(\"success\", data.data.store_coordinates);\n            setStoreCoordinates(data.data.store_coordinates);\n            setOrderToken(data.order_token);\n            setStoreName(data.data.store_name);\n            setStoreDistance(data.distance);\n            setCheckout(true);\n          }});\n\n  }\n\n  const definalizeCart = () => {\n    setCartFilled(false);\n  }\n  const handleLogin = (event) => {\n    //Prevent page reload\n    event.preventDefault();\n\n    var { uname, pass } = document.forms[0];\n    //Call the login API to validate the login call\n    \n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ uname: uname.value, password: pass.value })\n    };\n\n    fetch(baseEndpoint+\"/login\", requestOptions)\n        .then(response => response.json())\n        .then(data => {\n            if(data.success){\n              var token = jwt_decode(data.token)\n              setUserInfo({'userName': token.username});\n              setSessionExpiry(token.expiry);\n              setIsSubmitted(true);\n              setToken(data.token);\n              let menuItems_resp = []\n              let menuItemPrices_resp = []\n              let menuItemDiscounts_resp = []\n              let cartCount_resp = {}\n              const requestOptions_ = {\n                method: 'GET',\n                headers: { 'Content-Type': 'application/json'}\n              };\n              fetch(baseEndpoint+\"/get_item_details/\"+data.token, requestOptions_)\n                .then(response => response.json())\n                .then(data => {\n                  console.log(data.success)\n                  if(data.success){\n                  data.data.forEach(element => {\n                    cartCount_resp[element.name] = 0;\n                    menuItems_resp.push(element.name);\n                    menuItemPrices_resp.push(parseFloat(element.mrp));\n                    menuItemDiscounts_resp.push(parseFloat(element.discountPercent));\n                  });\n\n                  setMenuItems(menuItems_resp);\n                  setMenuItemPrice(menuItemPrices_resp);\n                  setMenuItemsTemp(menuItems_resp);\n                  setMenuItemsPriceTemp(menuItemPrices_resp);\n                  console.log(JSON.stringify(cartCount_resp), \"Hello\");\n                  setCartCount(cartCount_resp);\n                  setTotalDiscount(menuItemDiscounts_resp);\n                }\n                else{\n                  clearCache();\n                  Store.addNotification({\n                    title: 'Session Expired',\n                    message: 'Pls login again',\n                    type: 'warning',                        \n                    container: 'top-right',                \n                    animationIn: [\"animated\", \"fadeIn\"],     \n                    animationOut: [\"animated\", \"fadeOut\"],  \n                    dismiss: {\n                      duration: 3000 \n        }\n      })\n                }\n              }\n            );\n            }\n            else{\n              Store.addNotification({\n                title: 'Login',\n                message: 'Pls check your login credentials',\n                type: 'warning',                        \n                container: 'top-right',                \n                animationIn: [\"animated\", \"fadeIn\"],     \n                animationOut: [\"animated\", \"fadeOut\"],  \n                dismiss: {\n                  duration: 3000 \n                }\n              })\n            }\n        });\n\n    //Call the menu-api for item list and populate everything with 0.\n\n    \n  //   setCartCount({'Soap': 0, 'Powder': 0, 'Shampoo': 0, 'Juice': 0, 'Soap1': 0,\n  // 'Juice1': 0, 'Shampoo1': 0, 'Powder1': 0});\n    // setMenuItems(['Soap', 'Powder', 'Shampoo', 'Juice', 'Soap1', 'Juice1', 'Shampoo1', 'Powder1']);\n\n    // setMenuItemPrice([100, 200, 300, 100, 200, 300, 40, 80]);\n\n    // setMenuItemsTemp(['Soap', 'Powder', 'Shampoo', 'Juice', 'Soap1', 'Juice1', 'Shampoo1', 'Powder1']);\n    // setMenuItemsPriceTemp([100, 200, 300, 100, 200, 300, 40, 80]);\n\n  };\n\n  const processIncrementAction = (item) => {\n      let existingCount = itemCount[item];\n      setCartCount({...itemCount, [item]: existingCount+1})\n  };\n\n  const processDecrementAction = (item) => {\n      let existingCount = itemCount[item];\n      setCartCount({...itemCount, [item]: Math.max(existingCount-1,0)})\n  };\n  const populateMenu = () => {\n    let populatedItem = []\n    for(var item = 0; item<Math.min(menuItems.length, 4); item++){\n        let itemCtr = item+4*currentPage;\n        let item_id = \"row_\"+itemCtr;\n        let plus_id = \"plus_\"+itemCtr;\n        let minus_id = \"minus_\"+itemCtr;\n        let itemName = menuItems[item+4*currentPage];\n        let itemPrice = menuItemPrice[item+4*currentPage]\n        populatedItem.push(\n        <div className=\"row_menu\">\n          <span id={item_id} style={{paddingLeft: '1.5vmin', paddingRight: '1.5vmin'}}>\n            {itemName} - {itemPrice}Rs.\n            </span>\n          <span>\n            <input type=\"image\" className=\"icon\" src={minus} id={minus_id} onClick={() => processDecrementAction(itemName)}/>\n            <span style={{paddingLeft: '.5vmin', paddingRight: '.5vmin'}}>{itemCount[menuItems[item+4*currentPage]]}</span>\n            <input type=\"image\" className=\"icon\" src={plus} id={plus_id} onClick={()=>processIncrementAction(itemName)}/>\n          </span>\n        </div>\n        )\n    }\n\n    return populatedItem;\n  }\n\n  const queryItems = (value) => {\n    let filteredMenu = menuItemsTemp.filter((it) =>{\n      if(value.length==0){\n        setMenuItemPrice(menuItemPriceTemp)\n        setMenuItems(menuItemsTemp)\n    }\n      else{\n        return it.toLowerCase().includes(value.toLowerCase());\n      }\n    })\n\n    if(value.length>0){\n    let filteredMenuPrice = []\n    filteredMenu.forEach(element => {\n      filteredMenuPrice.push(menuItemPriceTemp[menuItemsTemp.indexOf(element)])\n    });\n    setMenuItems(filteredMenu)\n    setMenuItemPrice(filteredMenuPrice)\n  }\n\n\n  }\n\n  const orderSummary = () => {\n    let populatedItem = []\n    let totalAmount = 0;\n    let discountedPrice = 0;\n    \n    for(var item = 0; item<menuItems.length; item++){\n      if (itemCount[menuItems[item]]>0){\n        totalAmount+=(menuItemPrice[item]*itemCount[menuItems[item]]);\n        discountedPrice+=(itemCount[menuItems[item]]*menuItemPrice[item] *(1-totalDiscount[item]/100))\n        populatedItem.push(\n        <div className=\"row_menu\">\n          <span style={{paddingLeft: '1.5vmin', paddingRight: '1.5vmin'}}>\n          ✅ {menuItems[item]+\" x\"+itemCount[menuItems[item]]}\n            </span>\n        </div>\n        )\n    }\n    }\n\n    populatedItem.push(\n      <div className=\"row_menu\">\n        <span style={{paddingLeft: '1.5vmin', paddingRight: '1.5vmin'}}>\n        {\"Your order value: \"+ totalAmount + \"Rs.\"}\n          </span>\n          <span style={{paddingLeft: '1.5vmin', paddingRight: '1.5vmin'}}>\n        {\"After discount(s): \"+ discountedPrice + \"Rs.\"}\n          </span>\n      </div>\n      )\n\n    return populatedItem;\n  }\n\n  // Generate JSX code for error message\n  const renderErrorMessage = (name) =>\n    name === errorMessages.name && (\n      <div className=\"error\">{errorMessages.message}</div>\n    );\n\n  // JSX code for login form\n  const renderForm = (\n    <div className=\"form\">\n      {              Store.addNotification({\n                title: 'Login Credentials',\n                message: 'Use Santosh/passoword as uname/pw',\n                type: 'default',                        \n                container: 'top-right',                \n                animationIn: [\"animated\", \"fadeIn\"],     \n                animationOut: [\"animated\", \"fadeOut\"],  \n                dismiss: {\n                  duration: 30000\n                }\n              })\n      }\n      <form onSubmit={handleLogin}>\n        <div className=\"input-container\">\n          <label>Username </label>\n          <input type=\"text\" name=\"uname\" required />\n          {renderErrorMessage(\"uname\")}\n        </div>\n        <div className=\"input-container\">\n          <label>Password </label>\n          <input type=\"password\" name=\"pass\" required />\n          {renderErrorMessage(\"pass\")}\n        </div>\n        <div className=\"button-container\">\n          <input type=\"submit\" />\n        </div>\n      </form>\n    </div>\n  );\n\n  const cartPageRender = (\n    cartFilled ? (<div>\n      <div className='cart-page-title'>Order Summary.</div>\n      <div id=\"wrapper\">\n        <div id=\"row1\">\n        <div id=\"col2\"> \n          <div id=\"menu\">\n              {orderSummary()}\n              </div>\n          </div>\n        </div>\n        <div id=\"row1\" style={{paddingTop:'2vmin',  display: 'flex', gap: '10px'}} >\n        <input type=\"button\" className=\"btn btn-primary btn-sm\" id=\"place-order\" value=\"Go Back\"\n                onClick={()=>{definalizeCart()}}/>\n                <input type=\"button\" className=\"btn btn-primary btn-sm\" id=\"place-order\" value=\"Proceed\"\n                onClick={()=>{finalizeCheckout()}}/>\n            </div>\n        \n      </div>\n      <div id=\"logout\" style={{paddingTop:'2vmin'}}>\n                <input type=\"button\" className=\"btn btn-danger btn-sm\" id=\"place-order\" value=\"Logout\"\n                onClick={()=>{clearCache()}}/>\n            </div>\n    </div>) :\n    (\n    <div>\n      <div className='cart-page-title'> {\"Hey \"+userInfo['userName']+\", What'cha buyin. today?\"}\n      </div>\n      <div id=\"rowText\">\n          <TextField\n          id=\"outlined-basic\"\n          variant=\"outlined\"\n          label=\"Search for items...\"\n          size=\"small\"\n          onChange= { s => queryItems(s.target.value)}\n        /></div>\n      <div id=\"wrapper\">\n        <div id=\"row1\">\n                  <div id=\"col1\"> \n                      <div style={{paddingRight: '3vmin'}}> <input type=\"image\" src={logoLeft}\n                      className=\"icon\" id=\"go-left\"\n                      onClick={()=>{decPage()}}/></div> \n                  </div>\n                  <div id=\"col2\"> \n                      <div id=\"menu\">\n                      {populateMenu()}\n                    </div>\n                  </div>\n                  <div id=\"col3\"> \n                      <div style={{paddingLeft: '3vmin'}}> <input type=\"image\" src={logoRight} \n                      className=\"icon\" id=\"go-right\"\n                      onClick={()=>{incPage()}}/></div> \n                  </div>\n\n        </div>\n        <div id=\"row1\" style={{paddingTop:'2vmin'}}>\n                <input type=\"button\" className=\"btn btn-primary btn-sm\" id=\"place-order\" value=\"Proceed to Checkout\"\n                onClick={()=>{finalizeCart()}}/>\n            </div>\n      \n      </div>\n      <div id=\"logout\" style={{paddingTop:'2vmin'}}>\n                <input type=\"button\" className=\"btn btn-danger btn-sm\" id=\"place-order\" value=\"Logout\"\n                onClick={()=>{clearCache()}}/>\n            </div>\n    </div>)\n  \n  )\n\n  let marker = L.icon({\n    iconUrl: plus,\n    iconRetinaUrl: plus,\n    iconAnchor: [5, 55],\n    popupAnchor: [10, -44],\n    iconSize: [25, 55],\n  });\n\n  const renderCheckout = (\n    <div id=\"wrapper\">\n        <div id=\"col1\">\n        <div className='payment-page-title'>Proceed to Payment. \n        </div>\n        <div className='payment-page-button' >\n        <input type=\"button\" className=\"btn btn-danger btn-sm\" id=\"place-order\" value=\"Click here for payment\"\n        onClick={()=>{window.open(orderToken)}}/>\n        </div>\n\n        <div className='payment-page-info'>Your order is coming from: {storeName} @ a distance: {storeDistance}Kms. \n        </div>\n        </div>\n        <div>\n            <MapContainer center={coordinates} zoom={12} >\n              <TileLayer\n                attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              />\n              <Marker position={coordinates} icon={marker}>\n                <Popup>\n                  Your location.\n                </Popup>\n              </Marker>\n              <Marker position={storeCoordinates} icon={marker}>\n                <Popup>\n                  Store location.\n                </Popup>\n              </Marker>\n              </MapContainer>\n\n        </div>\n        <div id=\"logout\" style={{paddingTop:'2vmin'}}>\n                <input type=\"button\" className=\"btn btn-danger btn-sm\" id=\"place-order\" value=\"Logout\"\n                onClick={()=>{clearCache()}}/>\n        </div>\n        \n    </div>\n    \n  )\n\n  return (\n    <div> \n      <ReactNotifications />{\n      checkout ? renderCheckout :\n      (isLoggedIn ? \n      cartPageRender\n                  :<div className=\"app\">\n                    <div className=\"login-form\">\n                      <div className=\"title\">Sign In</div>\n                      {renderForm}\n                    </div>\n                  </div>)\n  }\n  \n  \n  </div>\n  );\n}\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(<App />);\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}